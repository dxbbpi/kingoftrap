<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KING OF TRAP</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Roboto',sans-serif;background:#111;color:#eee;overflow-x:hidden;}

#loader{
  position:fixed;
  top:0;left:0;width:100%;height:100%;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  z-index:9999;
  opacity:0;
  pointer-events:none;
  transition:opacity 0.5s;
  overflow:hidden;
}
#loader.show{
  opacity:1;
  pointer-events:auto;
}
#loader canvas{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
}
#loader span{
  font-family:'Orbitron',sans-serif;
  font-size:3rem;
  color:#fff;
  letter-spacing:3px;
  text-shadow:0 0 5px #fff;
  z-index:10;
}
#loader .dots{
  display:flex;
  gap:8px;
  margin-top:20px;
  z-index:10;
}
#loader .dot{
  width:10px;
  height:10px;
  border-radius:50%;
  background:#fff;
  animation:blinkDot 1.5s infinite;
}
#loader .dot:nth-child(2){animation-delay:0.3s;}
#loader .dot:nth-child(3){animation-delay:0.6s;}
@keyframes blinkDot{
  0%,80%,100%{opacity:0.2;}
  40%{opacity:1;}
}

#landing{
  display:flex;flex-direction:column;justify-content:center;align-items:center;
  height:100vh;text-align:center;background:#111 url('https://img2.pic.in.th/pic/ChatGPT-Image-Jul-6-2025-03_55_53-PM.png') no-repeat center/cover;
  position:relative;overflow:hidden;
}
#landing h1{
  font-family:'Orbitron',sans-serif;font-size:4rem;color:#fff;text-shadow:0 0 5px #fff,0 0 10px #aaa;
  margin-bottom:30px;letter-spacing:2px;opacity:0;transform:scale(0.9);animation:fadeInText 1.5s forwards;
}
@keyframes fadeInText{to{opacity:1;transform:scale(1);}}
#enter-btn{
  padding:12px 30px;font-size:1.2rem;font-weight:700;color:#fff;border:2px solid #fff;border-radius:50px;
  background:#000;cursor:pointer;opacity:0;transform:scale(0.8);animation:fadeInBtn 2s forwards 1s;transition:0.3s;
}
#enter-btn:hover{box-shadow:0 0 15px #fff;transform:scale(1.05);}
@keyframes fadeInBtn{to{opacity:1;transform:scale(1);}}
footer{position:absolute;bottom:10px;font-size:0.85rem;color:#555;}

#members{display:none;padding:20px;min-height:100vh;background:#111;}
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
header h1{font-family:'Orbitron',sans-serif;font-size:2rem;color:#fff;text-shadow:0 0 3px #fff;}
.home-btn{background:#111;border:2px solid #fff;padding:6px 18px;border-radius:30px;color:#fff;cursor:pointer;transition:0.3s;}
.home-btn:hover{background:#fff;color:#111;box-shadow:0 0 10px #fff;}

.search-container{max-width:350px;margin:0 auto 20px;position:relative;}
.search-container input{width:100%;padding:10px 40px;border-radius:25px;border:none;background:#222;color:#fff;outline:none;box-shadow:0 0 5px #fff;}
.search-container .fa-search{position:absolute;top:50%;left:12px;transform:translateY(-50%);color:#fff;}

.section-title{margin:20px 0 10px;font-family:'Orbitron',sans-serif;font-size:1.2rem;color:#fff;border-bottom:1px solid #fff;padding-bottom:5px;text-align:center;}

.member-center{display:flex;flex-wrap:wrap;justify-content:center;gap:20px;margin-bottom:20px;}
.member-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:15px;justify-items:center;}

.member-card{background:#111;border:2px solid #fff;border-radius:15px;padding:15px;text-align:center;cursor:pointer;transition:0.4s;width:100%;max-width:160px;box-shadow:0 0 3px #fff;opacity:0;transform:translateY(20px);}
.member-card.show{animation:cardFadeIn 0.5s forwards;}
@keyframes cardFadeIn{to{opacity:1;transform:translateY(0);}}
.member-card:hover{transform:translateY(-5px) scale(1.05);box-shadow:0 0 15px #fff;}
.member-card img{width:100%;max-width:110px;height:auto;border-radius:50%;border:3px solid #fff;object-fit:cover;transition:0.4s;}
.member-card h3{color:#fff;font-size:1rem;margin:8px 0 4px;}
.member-card p{color:#fff;font-size:0.85rem;margin-bottom:6px;}
.member-card a{color:#fff;font-size:0.75rem;}
.member-card a:hover{color:#fff;}

.pagination{display:flex;justify-content:center;gap:15px;margin-top:25px;}
.page-btn{padding:6px 12px;background:#111;border-radius:20px;border:2px solid #fff;color:#fff;cursor:pointer;transition:0.3s;}
.page-btn.active{background:#fff;color:#111;}
.page-btn:hover{background:#fff;color:#111;}
</style>
</head>
<body>

<div id="loader">
  <canvas id="matrixCanvas"></canvas>
  <span>LOADING</span>
  <div class="dots">
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>
</div>

<div id="landing">
    <h1>KING OF TRAP</h1>
    <button id="enter-btn"><i class="fas fa-users"></i> Members</button>
    <footer>Created by JUTI STORY Â© 2025 KING OF TRAP</footer>
</div>

<div id="members">
    <header>
        <h1>KING OF TRAP</h1>
        <button id="homeBtn" class="home-btn"><i class="fas fa-home"></i> Home</button>
    </header>

    <div class="search-container">
        <i class="fas fa-search"></i>
        <input type="text" id="searchInput" placeholder="Search member name...">
    </div>

    <div id="owenSection">
        <div class="section-title">Owen</div>
        <div class="member-center" id="owenGrid"></div>
    </div>

    <div id="leadersSection">
        <div class="section-title">Leaders</div>
        <div class="member-center" id="leadersGrid"></div>
    </div>

    <div id="membersSection">
        <div class="section-title">Members</div>
        <div class="member-grid" id="membersGrid"></div>
    </div>

    <div class="pagination" id="pagination"></div>
</div>

<script>
const landing = document.getElementById('landing');
const membersPage = document.getElementById('members');
const loader = document.getElementById('loader');
const searchInput = document.getElementById('searchInput');
const leadersGrid = document.getElementById('leadersGrid');
const membersGrid = document.getElementById('membersGrid');
const owenGrid = document.getElementById('owenGrid');
const pagination = document.getElementById('pagination');
const owenSection = document.getElementById('owenSection');
const leadersSection = document.getElementById('leadersSection');

let membersData = [];
let currentPage = 1;

const canvas = document.getElementById('matrixCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()';
const fontSize = 16;
const columns = Math.floor(canvas.width / fontSize);
const drops = Array(columns).fill(1);

function drawMatrix(){
  ctx.fillStyle = 'rgba(0,0,0,0.1)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = '#fff';
  ctx.font = fontSize + 'px monospace';
  for(let i=0;i<drops.length;i++){
    const text = letters.charAt(Math.floor(Math.random()*letters.length));
    ctx.fillText(text,i*fontSize,drops[i]*fontSize);
    if(drops[i]*fontSize > canvas.height && Math.random() > 0.975){ drops[i]=0; }
    drops[i]++;
  }
  requestAnimationFrame(drawMatrix);
}
drawMatrix();

document.getElementById('enter-btn').addEventListener('click', () => {
    loader.classList.add('show');
    setTimeout(()=>{
        loader.classList.remove('show');
        setTimeout(()=>{
            landing.style.display = 'none';
            membersPage.style.display = 'block';
            renderPage();
        },500);
    },4000);
});

document.getElementById('homeBtn').addEventListener('click', () => {
    membersPage.style.display = 'none';
    landing.style.display = 'flex';
    searchInput.value = '';
    currentPage = 1;
    renderPage();
});

fetch('members.json').then(res => res.json()).then(data => {
    membersData = data;
    renderPage();
});

function renderPage(){
    const searchVal = searchInput.value.toLowerCase();
    const owen = membersData.filter(m => m.role.toLowerCase() === 'owen');
    const leaders = membersData.filter(m => m.role.toLowerCase().includes('leader'));
    let membersOnly = membersData.filter(m => !m.role.toLowerCase().includes('leader') && m.role.toLowerCase() !== 'owen');
    if(searchVal) membersOnly = membersOnly.filter(m => m.name.toLowerCase().includes(searchVal));

    let itemsPerPage = currentPage === 1 ? 11 : 33;

    if(currentPage === 1){
        owenSection.style.display='block';
        leadersSection.style.display='block';
        owenGrid.innerHTML='';
        owen.forEach((m,i)=>setTimeout(()=>{const card=createCard(m);card.classList.add('show');owenGrid.appendChild(card);},i*100));
        leadersGrid.innerHTML='';
        leaders.forEach((m,i)=>setTimeout(()=>{const card=createCard(m);card.classList.add('show');leadersGrid.appendChild(card);},i*100));
    } else {
        owenSection.style.display='none';
        leadersSection.style.display='none';
    }

    membersGrid.innerHTML='';
    let startIdx = currentPage === 1 ? 0 : 11 + (currentPage - 2) * 33;
    let endIdx = startIdx + itemsPerPage;
    const paginatedMembers = membersOnly.slice(startIdx,endIdx);
    paginatedMembers.forEach((m,i)=>setTimeout(()=>{const card=createCard(m);card.classList.add('show');membersGrid.appendChild(card);},i*100));

    pagination.innerHTML='';
    const totalPages = Math.ceil((membersOnly.length-11)/33)+1;
    for(let i=1;i<=totalPages;i++){
        const btn=document.createElement('button');
        btn.className='page-btn'+(i===currentPage?' active':'');
        btn.innerText=i;
        btn.addEventListener('click',()=>{currentPage=i;renderPage();});
        pagination.appendChild(btn);
    }
}

function createCard(m){
    const card = document.createElement('div');
    card.className = 'member-card';
    card.innerHTML = `<img src="${m.img}" alt="${m.name}"><h3>${m.name}</h3><p>${m.role}</p><a href="${m.facebook}" target="_blank"><i class="fab fa-facebook"></i> facebook</a>`;
    return card;
}

searchInput.addEventListener('input',()=>{currentPage=1; renderPage();});
</script>
</body>
</html>
